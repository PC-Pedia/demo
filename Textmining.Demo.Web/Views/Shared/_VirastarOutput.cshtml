@model List<TokenInfo>
@{
    Layout = null;
}
<style>
    .has-suggestions {
        border-bottom: 2px solid #f44336;
        -ms-border-radius: 5px;
        border-radius: 5px;
        /*margin-left: 5px;*/
    }

    .has-refine {
        border-bottom: 2px solid #00C853;
        -ms-border-radius: 5px;
        border-radius: 5px;
        /*margin-left: 5px;*/
    }
</style>

@foreach (var tokenInfo in Model)
{
    if (tokenInfo.IsChanged)
    {
        var title = $"<span class='text-mute'>{tokenInfo.EditList.Last().SuggestedText}</span>";
        var content = tokenInfo.EditList.Last().Description;
        if (tokenInfo.EditList.Count > 1)
        {
            title = "<span class='text-mute'>چند پیشنهاد وجود دارد:</span>";
            content = "<table style=\"width: 100%;\">";
            foreach (EditItem item in tokenInfo.EditList)
            {
                string desc = item.EditType == EditType.SpellCorrection ? "اصلاح اشتباه املائی" : item.Description;
                content += $"<tr><td style=\"padding-left:10px;font-weight:bold\" class=\"block\">{item.SuggestedText}</td><td class=\"block\">{desc}</td></tr>";
            }
            content += "</table>";
        }
        var style = tokenInfo.EditList.Any(ed => ed.EditType == EditType.SpellCorrection || ed.EditType == EditType.WordSuggestion)
                    ? "has-suggestions"
                    : "has-refine";
        <span class="@style"
              data-trigger="hover"
              data-toggle="popover"
              data-placement="top"
              data-html="true"
              style="display:inline-block;"
              title="@title"
              data-content="@content">
            @tokenInfo.OriginalText
        </span>
    }
    else
    {
        <span class="" style="display:inline-block;">
            @tokenInfo.OriginalText
        </span>
    }

    if (@tokenInfo.OriginalText.Contains('\n'))
    {
        <br/>
    }
}



<partial name="_ErrorReportButton" />
<div style="font-size: 80%">
    چنانچه ابزار موردنظر خروجی مناسبی ندارد، لطفاً کلید «گزارش ایراد در خروجی» را زده و خروجی مورد انتظار خود را برای ما بفرستید. مطمئن باشید گزارش شما مورد توجه تیم متن‌کاوی فارسی‌یار بوده و روی بهبود نتایج ابزارهای پردازش متن فارسی تاثیرگذار است.
</div>

<script>

    $(function () {
        $('span[data-toggle="popover"]').popover();
    })
</script>